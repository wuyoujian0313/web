/*!
 * frame component
 * http://www.wadecn.com/
 * auth:xiedx@asiainfo.com
 * Copyright 2015, WADE
 */
!function(a,r,n){"use strict";if(a&&"undefined"==typeof a.Frame){var t=function(t,i){var e=this;e.el=t&&1==t.nodeType?t:n.getElementById(t),e.el&&e.el.nodeType&&(e.id=a.attr(e.el,"id"))&&(i&&a.isObject(i)&&a.extend(e,i),a.attr(e.el,"x-wade-uicomponent")||a.attr(e.el,"x-wade-uicomponent","frame"),e._init(),e.constructor.call(e))};t.prototype=a.extend(new a.UIComponent,{init:function(){var t=this;!0!==t.inited&&(t.page&&a.isString(t.page)?(t.redirect(t.page,t.listener,t.params,t.subsys),t.inited=!0):t.src&&a.isString(t.src)&&(t.redirectByUrl(t.src),t.inited=!0))},focus:function(){var t=this.el.contentWindow;try{t&&t.focus()}catch(i){}t=null},reload:function(){var t=this;t.redirect(t.page,t.listener,t.params,t.subsys)},redirect:function(t,i,e,n){t&&a.isString(t)&&(this.beginLoading(),this.el.src=a.redirect.buildUrl(n,t,i,e))},reset:function(t,i,e,n,r){var l=this;if(t&&a.isString(t)){var s=a.md5(t+i+e+n)!==a.md5(l.page+l.listener+l.params+l.subsys);return s&&(l.page=t,l.listener=i,l.params=e,l.subsys=n,l.inited=!1,l.beginLoading()),r&&(l.title=r),s}},reloadByUrl:function(){this.redirectByUrl(this.src)},redirectByUrl:function(t){t&&a.isString(t)&&(this.beginLoading(),this.el.src=t)},resetByUrl:function(t,i){var e=this;if(t&&a.isString(t)){var n=a.md5(t)!==a.md5(e.src);return n&&(e.src=t,e.inited=!1,e.beginLoading()),i&&(e.title=i),n}},setAttribute:function(t,i,e){t&&a.isString(t)&&i&&a.isString(i)&&(a.attr(this.el,t,i),!0===e&&(this[t]=i))},beginLoading:function(t){var i=this;t&&a.isString(t)&&(i.loadingTxtEl.innerHTML=t),i.el.style.display="none",i.loadingEl.style.display="",i.loading=!0},endLoading:function(){var t=this;t.loadingEl.style.display="none",t.el.style.display="",t.loading=!1},adjust:function(){var t=this.el.contentWindow;try{t&&t.document&&t.$&&t.$.expando&&(t.$.Scroller&&t.$.Scroller.refresh(),t.$.Table&&t.$.Table.adjust())}catch(i){console.log(i)}finally{t=null}},destroy:function(){var t=this;t.loadingEl=null,t.loadingTxtEl=null,t.el=null},_init:function(){var n=this;n.loadingEl=a(n.el).next("div.c_msg-loading:first")[0],n.loadingTxtEl=a(n.loadingEl).find("div.title:first")[0],"none"!=n.el.style.display&&(n.el.style.display="none"),a(n.el).bind(a.browser.msie&&r.attachEvent?"readystatechange":"load",function(t){if((!a.browser.msie||!r.attachEvent||"complete"==this.readyState)&&(!0===n.loading&&n.endLoading(),n.title&&a.isString(n.title))){var i=n.el.contentWindow;try{i&&i.document&&i.$&&i.$.expando&&(i.$("div[class=c_header]:first",i.document.body).find("div[class=back]:first").text(n.title),i.$.Scroller&&i.$.Scroller.refresh(),i.$.Table&&i.$.Table.adjust(),a.browser.msie&&i.$("input,textarea,select").each(function(){this.readOnly&&(this.onfocus=function(){this.blur()})}))}catch(e){console.log(e)}finally{i=null}}}),!0===n.autoInit&&n.init()}}),r.Frame=a.Frame=t}}(window.Wade,window,document);