/*!
 * ipaddressfield component
 * http://www.wadecn.com/
 * auth:xiedx@asiainfo.com
 * Copyright 2015, WADE
 */
!function(s,e,i){"use strict";if(s&&"undefined"==typeof s.IpAddressField){var n=i.createElement("input"),t="oninput"in n;n=null;var u=s.os.phone||!0===s.ratioPhone,o=/^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$/,a=function(e,n){var a=this;a.el=e&&1==e.nodeType?e:i.getElementById(e),a.el&&a.el.nodeType&&(a.id=s.attr(a.el,"id"))&&(n&&s.isObject(n)&&s.extend(a,n),s.attr(a.el,"x-wade-uicomponent")||s.attr(a.el,"x-wade-uicomponent","ipaddressfield"),a._init(),a.constructor.call(a))};a.prototype=s.extend(new s.UIComponent,{val:function(e){var n=this;if(e==undefined)return n.el.value;if(""!=e){if(o.test(e)){var a,i=!0,l=[],r=(""+e).split(".");for(d=0;d<r.length;d++){if((a=parseInt(r[d]))<0||255<a){i=!1;break}l.push(a)}if(!0===i&&4==l.length){for(d=0;d<4;d++)n["range"+(d+1)].value=l[d];n.value=n.el.value=l.join(".")}return l=a=r=null,void(i=null)}}else{for(var d=0;d<4;d++)n["range"+(d+1)].value="";n.value=n.el.value=""}},getDisabled:function(){return this.disabled},setDisabled:function(e){var n=this;n.disabled=!!e;var a=n.span.className?n.span.className:"";n.disabled?((" "+a+" ").indexOf(" e_dis ")<0&&(n.span.className=s.trim(a+" e_dis")),n.range1.disabled=!0,n.range2.disabled=!0,n.range3.disabled=!0,n.range4.disabled=!0):(a=s.trim((" "+a+" ").replace(/ e_dis /gi," ")),n.span.className=a,n.range1.disabled=!1,n.range2.disabled=!1,n.range3.disabled=!1,n.range4.disabled=!1)},destroy:function(){for(var e=this,n=1;n<5;n++)e["range_"+n+"_value"]=null;e.span=null,e.range1=null,e.range2=null,e.range3=null,e.range4=null,e.el=null},_init:function(){var i=this;if(i.span=s(i.el).parent(".e_mix-ip")[0],i.span&&i.span.nodeType){var e=s(i.span).children("input[type=text]");e&&4==e.length&&(i.range1=e[0],i.range2=e[1],i.range3=e[2],i.range4=e[3]),e=null}var n=i.span.className?i.span.className:"";if(i.disabled&&(" "+n+" ").indexOf(" e_dis ")<0&&(i.span.className=s.trim(n+" e_dis")),i.value&&i.val(i.value),t){var a=function(e){if(i.disabled||i.readonly)return!1;var n=e.data;if(n){var a=s.trim((""+this.value).replace(/[^0-9]+/g,""));255<(a=""==a?0:parseInt(a))||a<0?a=i["range_"+n+"_value"]:i["range_"+n+"_value"]=a,this.value=a,i._fillValue()}};s(i.range1).bind("input",1,a),s(i.range2).bind("input",2,a),s(i.range3).bind("input",3,a),s(i.range4).bind("input",4,a)}else{var l=function(e){return!i.disabled&&!i.readonly&&(!(e.shiftKey||e.altKey||e.ctrlKey)&&(47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106||8==e.keyCode||46==e.keyCode))},r=function(e){if(i.disabled||i.readonly)return!1;var n=e.data;if(n){var a=s.trim((""+this.value).replace(/[^0-9]+/g,""));255<(a=""==a?0:parseInt(a))||a<0?a=i["range_"+n+"_value"]:i["range_"+n+"_value"]=a,this.value=a,i._fillValue()}};s(i.range1).bind("keydown",l),s(i.range2).bind("keydown",l),s(i.range3).bind("keydown",l),s(i.range4).bind("keydown",l),s(i.range1).bind("keyup",1,r),s(i.range2).bind("keyup",2,r),s(i.range3).bind("keyup",3,r),s(i.range4).bind("keyup",4,r)}if(!s.os.pad&&!u){var d=function(){if(i.disabled||i.readonly)return!1;s(this).select()};s(i.range1).bind("focus",d),s(i.range2).bind("focus",d),s(i.range3).bind("focus",d),s(i.range4).bind("focus",d)}},_fillValue:function(){for(var e,n=this,a=[],i=1;i<5;i++)e=""==(e=n["range"+i].value)?0:e,a.push(e);n.value=n.el.value=a.join(".")}}),e.IpAddressField=s.IpAddressField=a}}(window.Wade,window,document);