/*
 Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("checkspell",function(a){function t(e,t){var n=0;return function(){"function"==typeof window.doSpell?(void 0!==o&&window.clearInterval(o),function i(t){var e=new window._SP_FCK_LangCompare,n=CKEDITOR.getUrl(a.plugins.wsc.path+"dialogs/"),o=n+"tmpFrameset.html";window.gFCKPluginName="wsc",e.setDefaulLangCode(a.config.defaultLanguage),window.doSpell({ctrl:d,lang:a.config.wsc_lang||e.getSPLangCode(a.langCode),intLang:a.config.wsc_uiLang||e.getSPLangCode(a.langCode),winType:c,onCancel:function(){t.hide()},onFinish:function(e){a.focus(),t.getParentEditor().setData(e.value),t.hide()},staticFrame:o,framesetPath:o,iframePath:n+"ciframe.html",schemaURI:n+"wsc.css",userDictionaryName:a.config.wsc_userDictionaryName,customDictionaryName:a.config.wsc_customDictionaryIds&&a.config.wsc_customDictionaryIds.split(","),domainName:a.config.wsc_domainName}),CKEDITOR.document.getById(l).setStyle("display","none"),CKEDITOR.document.getById(c).setStyle("display","block")}(e)):180==n++&&window._cancelOnError(t)}}var o,c="cke_frame_"+(e=CKEDITOR.tools.getNextNumber()),d="cke_data_"+e,l="cke_error_"+e,e=document.location.protocol||"http:",n=a.lang.wsc.notAvailable,i='<textarea style="display: none" id="'+d+'" rows="10" cols="40"> </textarea><div id="'+l+'" style="display:none;color:red;font-size:16px;font-weight:bold;padding-top:160px;text-align:center;z-index:11;"></div><iframe src="" style="width:100%;background-color:#f1f1e3;" frameborder="0" name="'+c+'" id="'+c+'" allowtransparency="1"></iframe>',s=a.config.wsc_customLoaderScript||e+"//loader.webspellchecker.net/sproxy_fck/sproxy.php?plugin=fck2&customerid="+a.config.wsc_customerId+"&cmd=script&doc=wsc&schema=22";return a.config.wsc_customLoaderScript&&(n+='<p style="color:#000;font-size:11px;font-weight: normal;text-align:center;padding-top:10px">'+a.lang.wsc.errorLoading.replace(/%s/g,a.config.wsc_customLoaderScript)+"</p>"),window._cancelOnError=function(e){if("undefined"==typeof window.WSC_Error){CKEDITOR.document.getById(c).setStyle("display","none");var t=CKEDITOR.document.getById(l);t.setStyle("display","block"),t.setHtml(e||a.lang.wsc.notAvailable)}},{title:a.config.wsc_dialogTitle||a.lang.wsc.title,minWidth:485,minHeight:380,buttons:[CKEDITOR.dialog.cancelButton],onShow:function(){var e=this.getContentElement("general","content").getElement();e.setHtml(i),e.getChild(2).setStyle("height",this._.contentSize.height+"px"),"function"!=typeof window.doSpell&&CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:s}})),e=a.getData(),CKEDITOR.document.getById(d).setValue(e),o=window.setInterval(t(this,n),250)},onHide:function(){window.ooo=void 0,window.int_framsetLoaded=void 0,window.framesetLoaded=void 0,window.is_window_opened=!1},contents:[{id:"general",label:a.config.wsc_dialogTitle||a.lang.wsc.title,padding:0,elements:[{type:"html",id:"content",html:""}]}]}}),CKEDITOR.dialog.on("resize",function(e){var t=(e=e.data).dialog;"checkspell"==t._.name&&((t=(t=t.getContentElement("general","content").getElement())&&t.getChild(2))&&t.setSize("height",e.height),t&&t.setSize("width",e.width))});