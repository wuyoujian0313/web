/*!
 * slide component
 * http://www.wadecn.com/
 * auth:xiedx@asiainfo.com
 * Copyright 2015, WADE
 */
!function(a,e,i){"use strict";if(a&&"undefined"==typeof a.Slide){Math;var l=i.createElement("div").style,t=function(){for(var e="t,webkitT,MozT,msT,OT".split(","),t=0,n=e.length;t<n;t++)if(e[t]+"ransform"in l)return e[t].substr(0,e[t].length-1);return!1}(),r=!1!==t,n=function(e,t){var n=this;n.el=e&&1==e.nodeType?e:i.getElementById(e),n.el&&n.el.nodeType&&(n.id=a.attr(n.el,"id"))&&(t&&a.isObject(t)&&a.extend(n,t),a.attr(n.el,"x-wade-uicomponent")||a.attr(n.el,"x-wade-uicomponent","slide"),n._init(),n.constructor.call(n))};n.prototype=a.extend(new a.UIComponent,{destroy:function(){var e=this;e.pic=null,e.picUL=null,e.page=null,e.fn=null,e.btnPrev=null,e.btnNext=null,e.thumb=null,e.thumbUL=null,e.thumbPrev=null,e.thumbNext=null,e.el=null},_init:function(){var t,i=this;(i.pic=a(i.el).children("div.pic:first")[0],i.picUL=a(i.pic).children("ul:first")[0],i.page=a(i.el).children("div.page:first")[0],i.fn=a(i.el).children("div.fn:first")[0],i.btnPrev=a(i.fn).children("span.prev:first")[0],i.btnNext=a(i.fn).children("span.next:first")[0],i.thumb=a(i.el).children("div.thumb:first")[0],i.pageIdx=0,i.pageMax=0,i.thumb&&(i.thumbUL=a(i.thumb).find("ul:first")[0],i.thumbPrev=a(i.thumb).children("div.prev:first")[0],i.thumbNext=a(i.thumb).children("div.next:first")[0]),a(i.picUL).children("li").each(function(e,t){a(i.page).append("<span"+(0==e?' class="on"':"")+"></span>"),i.pageMax++}),r&&(i.scroller=new a.Scroll(i.pic,{snap:!0,momentum:!1,hScrollbar:!1,onScrollEnd:function(){i.pageIdx=this.currPageX,i.switchPage(i.pageIdx)}})),i.useThumb)&&(a("img",i.picUL).each(function(e){t=a.attr(this,"src"),a(i.thumbUL).append('<li idx="'+e+'" '+(0==e?' class="on"':"")+'><img src="'+t+'" /></li>')}),i.page.style.display="none");a(i.btnPrev).tap(function(){if(r)i.scroller.scrollToPage("prev",0);else{if(0==i.pageIdx)return;i.switchPicNoTransform(i.pageIdx-1),i.switchPage(i.pageIdx-1),i.pageIdx--}}),a(i.btnNext).tap(function(){if(r)i.scroller.scrollToPage("next",0);else{if(i.pageIdx==i.pageMax-1)return;i.switchPicNoTransform(i.pageIdx+1),i.switchPage(i.pageIdx+1),i.pageIdx++}}),i.useThumb&&(a(i.thumbUL).tap(function(e){e.originalEvent&&(e=a.event.fix(e.originalEvent));var t=e.target;if(t&&t.nodeType&&(a.nodeName(t,"img")&&(t=t.parentNode),a.nodeName(t,"li"))){var n=a.attr(t,"idx");/^\d+$/gi.test(n)&&(r?i.scroller.scrollToPage(n,0):(i.switchPicNoTransform(n),i.switchPage(n),i.pageIdx=parseInt(n)))}}),a(i.thumbPrev).tap(function(){if(r)i.scroller.scrollToPage("prev",0);else{if(0==i.pageIdx)return;i.switchPicNoTransform(i.pageIdx-1),i.switchPage(i.pageIdx-1),i.pageIdx--}}),a(i.thumbNext).tap(function(){if(r)i.scroller.scrollToPage("next",0);else{if(i.pageIdx==i.pageMax-1)return;i.switchPicNoTransform(i.pageIdx+1),i.switchPage(i.pageIdx+1),i.pageIdx++}}))},switchPicNoTransform:function(e){this.picUL.style.marginLeft="-"+100*e+"%"},switchPage:function(e){var t=this;/^\d+$/gi.test(e)&&(a("span[class=on]",t.page).attr("className",""),a("span:nth-child("+(e+1)+")",t.page).attr("className","on"),t.useThumb&&(a("li[class=on]",t.thumbUL).attr("className",""),a("li:nth-child("+(e+1)+")",t.thumbUL).attr("className","on")))}}),l=null,e.Slide=a.Slide=n}}(window.Wade,window,document);